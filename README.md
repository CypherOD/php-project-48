# Gendiff ‚Äì –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å –æ—Ç–ª–∏—á–∏–π

[![project-check](https://github.com/StandAlone404/php-project-48/actions/workflows/project-check.yml/badge.svg)](https://github.com/StandAlone404/php-project-48/actions/workflows/project-check.yml)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=alert_status)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=coverage)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Code Smells](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=code_smells)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Bugs](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=bugs)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Duplicated Lines (%)](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=duplicated_lines_density)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Lines of Code](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=ncloc)](https://sonarcloud.io/summary/new_code?id=php-project-48)
[![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=php-project-48&metric=reliability_rating)](https://sonarcloud.io/summary/new_code?id=php-project-48)

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

**Gendiff** ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö `JSON` –∏ `YAML`, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞:

- `stylish` ‚Äî –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `plain` ‚Äî –ø–ª–æ—Å–∫–∏–π —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `json` ‚Äî JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üé• –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

–í—ã–≤–æ–¥ –≤ —Ñ–æ–º–∞—Ç–µ stylish:

[![asciicast](https://asciinema.org/a/M5kRht39FKYV6LoFjISj92MKx.svg)](https://asciinema.org/a/M5kRht39FKYV6LoFjISj92MKx)

–í—ã–≤–æ–¥ –≤ —Ñ–æ–º–∞—Ç–µ plain:

[![asciicast](https://asciinema.org/a/4hbI80NvSL7V521rtA02bTtMu.svg)](https://asciinema.org/a/4hbI80NvSL7V521rtA02bTtMu)

–í—ã–≤–æ–¥ –≤ —Ñ–æ–º–∞—Ç–µ json:

[![asciicast](https://asciinema.org/a/SS6mt3J75lanThzt8WArdSXpq.svg)](https://asciinema.org/a/SS6mt3J75lanThzt8WArdSXpq)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —É—Ç–∏–ª–∏—Ç—ã:

```bash
git clone https://github.com/gennadiy-dev/php-project-48.git
cd php-project-48

make install # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

make link  # –¥–µ–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `gendiff` –¥–æ—Å—Ç—É–ø–Ω–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ (Linux/macOS)
make link-wsl  # –¥–µ–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `gendiff` –¥–æ—Å—Ç—É–ø–Ω–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ (Windows/Wsl)

make unlink  # —É–¥–∞–ª—è–µ—Ç —Å—Å—ã–ª–∫—É (Linux/macOS)
make unlink-wsl  # —É–¥–∞–ª—è–µ—Ç —Å—Å—ã–ª–∫—É —Å sudo –¥–ª—è WSL (Windows/Wsl)
````

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:

```php
use function Differ\Differ\getDiff;

$diff = getDiff('file1.yaml', 'file2.json', 'plain');
echo $diff;
```

---

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CLI

```bash
gendiff [--format <format>] <firstFile> <secondFile>
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä          | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| ----------------- | ------------------------------------------ |
| `<firstFile>`     | –ü—É—Ç—å –∫ –ø–µ—Ä–≤–æ–º—É —Ñ–∞–π–ª—É                       |
| `<secondFile>`    | –ü—É—Ç—å –∫–æ –≤—Ç–æ—Ä–æ–º—É —Ñ–∞–π–ª—É                      |
| `--format`        | –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ (`stylish`, `plain`, `json`) |
| `-h`, `--help`    | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É                           |
| `-v`, `--version` | –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é                            |

---

## üí° –ü—Ä–∏–º–µ—Ä—ã

### Stylish (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```bash
gendiff file1.json file2.json
```

```diff
{
    common: {
      + follow: false
        setting1: Value 1
      - setting2: 200
      + setting2: 300
    }
}
```

### Plain:

```bash
gendiff --format plain file1.yaml file2.yaml
```

```text
Property 'common.follow' was added with value: false
Property 'common.setting2' was updated. From 200 to 300
```

### JSON:

```bash
gendiff --format json file1.json file2.json
```

```json
[
  {
    "key": "common",
    "status": "nested",
    "value": [...]
  }
]
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make test
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
bin
‚îî‚îÄ‚îÄ gendiff                 # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–≤—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ —É—Ç–∏–ª–∏—Ç—ã)
src
‚îú‚îÄ‚îÄ Differ.php              # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–ª–∏—á–∏–π
‚îú‚îÄ‚îÄ FileReader.php          # –ß—Ç–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ Parsers.php             # –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ø–∞—Ä—Å–∏–Ω–≥ JSON –∏ YAML
‚îú‚îÄ‚îÄ Formatters.php          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–≤ (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±–æ—Ä–∞)
‚îú‚îÄ‚îÄ Formatters
‚îÇ   ‚îú‚îÄ‚îÄ Helpers.php         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Json.php            # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä –≤—ã–≤–æ–¥–∞ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ
‚îÇ   ‚îú‚îÄ‚îÄ Plain.php           # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ "–ø–ª–æ—Å–∫–æ–º" —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
‚îÇ   ‚îî‚îÄ‚îÄ Stylish.php         # –§–æ—Ä–º–∞—Ç—Ç–µ—Ä –¥–ª—è –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–ª–∏—á–∏–π —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
‚îî‚îÄ‚îÄ enums
    ‚îî‚îÄ‚îÄ Status.php          # Enum —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤ —É–∑–ª–æ–≤: added, removed, updated –∏ –¥—Ä.
```

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

[Gennadiy Maslov](https://github.com/gmaslov-dev)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](LICENSE).
